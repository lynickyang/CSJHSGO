import{M}from"./modal-IVpuTcq9.js";import{_ as w,o as i,b as c,d as t,t as r,w as p,v as h,y as $,r as b,F as C,m as N,u as f,g as y}from"./index-B7ihADu2.js";const V={props:{product:{type:Object,default(){return{}}},isNew:""},watch:{product(){this.tempProduct=this.product}},data(){return{modal:{},tempProduct:{}}},methods:{showModal(){console.log("開啟ＭＯＤＡＬ"),this.modal.show()},hideModal(){console.log("關閉ＭODLE"),this.modal.hide()}},mounted(){this.modal=new M(this.$refs.modal)}},B={class:"modal fade",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-hidden":"true",ref:"modal"},L={class:"modal-dialog modal-dialog-centered"},U={class:"modal-content"},F={class:"modal-header"},I={class:"modal-title fs-5",id:"staticBackdropLabel"},O={class:"modal-body"},T={class:"form-floating mb-3"},S=t("label",{for:"name"},"名稱",-1),j={class:"form-floating mb-3"},E=t("label",{for:"floatingTextarea2"},"描述",-1),q={class:"form-floating mb-3"},z=t("label",{for:"image"},"照片網址",-1),A={class:"modal-footer"};function G(_,e,a,u,s,l){return i(),c("div",B,[t("div",L,[t("div",U,[t("div",F,[t("h1",I,r(a.isNew?"新增":"編輯"),1),t("button",{onClick:e[0]||(e[0]=(...o)=>l.hideModal&&l.hideModal(...o)),type:"button",class:"btn-close"})]),t("div",O,[t("form",null,[p(t("input",{type:"hidden",name:"id","onUpdate:modelValue":e[1]||(e[1]=o=>s.tempProduct.id=o)},null,512),[[h,s.tempProduct.id]]),t("div",T,[p(t("input",{class:"form-control",type:"text",id:"name",placeholder:"名稱","onUpdate:modelValue":e[2]||(e[2]=o=>s.tempProduct.name=o)},null,512),[[h,s.tempProduct.name]]),S]),t("div",j,[p(t("textarea",{class:"form-control",placeholder:"Leave a comment here",id:"floatingTextarea2","onUpdate:modelValue":e[3]||(e[3]=o=>s.tempProduct.description=o),style:{height:"100px"}},null,512),[[h,s.tempProduct.description]]),E]),t("div",q,[p(t("input",{class:"form-control",type:"text",id:"image",placeholder:"照片網址","onUpdate:modelValue":e[4]||(e[4]=o=>s.tempProduct.image=o)},null,512),[[h,s.tempProduct.image]]),z])])]),t("div",A,[t("button",{onClick:e[5]||(e[5]=(...o)=>l.hideModal&&l.hideModal(...o)),type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," 取消 "),t("button",{type:"submit",onClick:e[6]||(e[6]=o=>_.$emit("update-product",s.tempProduct)),class:"btn btn-primary"},r(a.isNew?"新增":"更新"),1)])])])],512)}const H=w(V,[["render",G]]),J={emits:["item-delete"],methods:{showModal(){this.modal.show()},hideModal(){this.modal.hide()},deleteCheck(){console.log("傳回ID觸發DEL"),this.$emit("item-delete"),this.hideModal()}},mounted(){this.modal=new M(this.$refs.modal)}},K={class:"modal fade","data-bs-keyboard":"false",tabindex:"-1","aria-hidden":"true",ref:"modal"},Q={class:"modal-dialog modal-dialog-centered"},R={class:"modal-content"},W={class:"modal-header"},X=t("h1",{class:"modal-title fs-5 text-danger"},"確認刪除",-1),Y=t("div",{class:"modal-body"},[t("p",null,"確定要刪除嗎?")],-1),Z={class:"modal-footer"};function tt(_,e,a,u,s,l){return i(),c("div",K,[t("div",Q,[t("div",R,[t("div",W,[X,t("button",{onClick:e[0]||(e[0]=(...o)=>l.hideModal&&l.hideModal(...o)),type:"button",class:"btn-close"})]),Y,t("div",Z,[t("button",{type:"button",onClick:e[1]||(e[1]=(...o)=>l.hideModal&&l.hideModal(...o)),class:"btn btn-secondary"},"取消"),t("button",{type:"submit",onClick:e[2]||(e[2]=o=>l.deleteCheck()),class:"btn btn-danger"},"確定")])])])],512)}const et=w(J,[["render",tt]]),ot={class:"container-lg"},lt={class:"text-end mt-5 mb-4"},st={class:"table table-hover"},dt=t("thead",null,[t("tr",null,[t("th",{width:"10%",scope:"col-md-1"},"#"),t("th",{width:"20%",scope:"col-md-4"},"植物中文"),t("th",{width:"50%",scope:"col-md-4"},"植物描述"),t("th",{width:"20%",scope:"col-md-3"},"功能")])],-1),at={scope:"row"},nt=["onClick"],it=["onClick"],ut={__name:"CreateView",setup(_){const e=$(),a=b(null),u=b(null);let s=b(!1),l=b({}),o="";function v(d,m){console.log("檢查傳入值isNew",d),d===!0?(l.value={},console.log("呼叫新增",l.value)):(console.log("呼叫編輯"),l.value={...m},console.log("顯示tempProduct:",l.value)),s.value=d,a.value.showModal()}function k(d){console.log("觸發updataProduct"),console.log("傳入資料：",d),console.log("isNew是什麼",s.value),s.value==!0?(console.log("觸發更新傳入的值：",d),l.value=d,console.log("設定temp為傳入的值",l.value),e.addData(l.value)):(console.log("更新模式"),e.editData(d,d.id)),a.value.hideModal()}function P(d){o=d,console.log("id:",d),u.value.showModal()}function x(){console.log("觸發成功"),e.deletData(o)}return(d,m)=>(i(),c("div",ot,[t("div",lt,[t("button",{class:"btn btn-primary",type:"button",onClick:m[0]||(m[0]=n=>v(!0))}," 新增項目 ")]),t("table",st,[dt,t("tbody",null,[(i(!0),c(C,null,N(f(e).products,(n,g)=>(i(),c("tr",{class:"table align-middle",key:g+1},[t("th",at,r(g+1),1),t("td",null,r(n.name),1),t("td",null,r(n.description),1),t("td",null,[t("button",{class:"btn btn-outline-primary m-1",onClick:D=>v(!1,n)},"編輯",8,nt),t("button",{class:"btn btn-outline-danger",onClick:D=>P(n.id)},"刪除",8,it)])]))),128))])]),y(H,{ref_key:"productModal",ref:a,product:f(l),isNew:f(s),onUpdateProduct:k},null,8,["product","isNew"]),y(et,{ref_key:"itemModalDel",ref:u,onItemDelete:x},null,512)]))}};export{ut as default};
