import{c as g,u as M,a as b,_ as Y,o as m,b as _,d as o,w as V,v as H,r as f,e as I,t as v,f as N,g as $,F as y,m as T,h as L,i as F,j as B,k as R,l as O,n as G,p as U,q as W,s as j,x as q,y as z,z as P}from"./index-Bxyx_9wC.js";import{M as A}from"./modal-IVpuTcq9.js";function C(e){return typeof e=="function"?e():M(e)}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const X=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Z=/[YMDHhms]o|\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a{1,2}|A{1,2}|m{1,2}|s{1,2}|Z{1,2}|SSS/g;function K(e,t,s,d){let r=e<12?"AM":"PM";return d&&(r=r.split("").reduce((a,n)=>a+=`${n}.`,"")),s?r.toLowerCase():r}function h(e){const t=["th","st","nd","rd"],s=e%100;return e+(t[(s-20)%10]||t[s]||t[0])}function J(e,t,s={}){var d;const r=e.getFullYear(),a=e.getMonth(),n=e.getDate(),i=e.getHours(),l=e.getMinutes(),c=e.getSeconds(),u=e.getMilliseconds(),E=e.getDay(),p=(d=s.customMeridiem)!=null?d:K,D={Yo:()=>h(r),YY:()=>String(r).slice(-2),YYYY:()=>r,M:()=>a+1,Mo:()=>h(a+1),MM:()=>`${a+1}`.padStart(2,"0"),MMM:()=>e.toLocaleDateString(s.locales,{month:"short"}),MMMM:()=>e.toLocaleDateString(s.locales,{month:"long"}),D:()=>String(n),Do:()=>h(n),DD:()=>`${n}`.padStart(2,"0"),H:()=>String(i),Ho:()=>h(i),HH:()=>`${i}`.padStart(2,"0"),h:()=>`${i%12||12}`.padStart(1,"0"),ho:()=>h(i%12||12),hh:()=>`${i%12||12}`.padStart(2,"0"),m:()=>String(l),mo:()=>h(l),mm:()=>`${l}`.padStart(2,"0"),s:()=>String(c),so:()=>h(c),ss:()=>`${c}`.padStart(2,"0"),SSS:()=>`${u}`.padStart(3,"0"),d:()=>E,dd:()=>e.toLocaleDateString(s.locales,{weekday:"narrow"}),ddd:()=>e.toLocaleDateString(s.locales,{weekday:"short"}),dddd:()=>e.toLocaleDateString(s.locales,{weekday:"long"}),A:()=>p(i,l),AA:()=>p(i,l,!1,!0),a:()=>p(i,l,!0),aa:()=>p(i,l,!0,!0)};return t.replace(Z,(S,x)=>{var w,k;return(k=x??((w=D[S])==null?void 0:w.call(D)))!=null?k:S})}function Q(e){if(e===null)return new Date(Number.NaN);if(e===void 0)return new Date;if(e instanceof Date)return new Date(e);if(typeof e=="string"&&!/Z$/i.test(e)){const t=e.match(X);if(t){const s=t[2]-1||0,d=(t[7]||"0").substring(0,3);return new Date(t[1],s,t[3]||1,t[4]||0,t[5]||0,t[6]||0,d)}}return new Date(e)}function ee(e,t="HH:mm:ss",s={}){return g(()=>J(Q(C(e)),C(t),s))}const te=b(),oe={props:["id"],methods:{showModal(){this.modal.show()},hideModal(){this.modal.hide()},deleteCheck(e){te.deleteNote(e),this.hideModal()}},mounted(){this.modal=new A(this.$refs.modal)}},se={class:"modal fade","data-bs-keyboard":"false",tabindex:"-1","aria-hidden":"true",ref:"modal"},ae={class:"modal-dialog modal-dialog-centered"},ne={class:"modal-content"},le={class:"modal-header"},de=o("h1",{class:"modal-title fs-5 text-danger"},"確認刪除",-1),re=o("div",{class:"modal-body"},[o("p",null,"確定要刪除嗎?")],-1),ie={class:"modal-footer"};function ce(e,t,s,d,r,a){return m(),_("div",se,[o("div",ae,[o("div",ne,[o("div",le,[de,o("button",{onClick:t[0]||(t[0]=(...n)=>a.hideModal&&a.hideModal(...n)),type:"button",class:"btn-close"})]),re,o("div",ie,[o("button",{type:"button",onClick:t[1]||(t[1]=(...n)=>a.hideModal&&a.hideModal(...n)),class:"btn btn-secondary"},"取消"),o("button",{type:"submit",onClick:t[2]||(t[2]=n=>a.deleteCheck(this.id)),class:"btn btn-danger"},"確定")])])])],512)}const ue=Y(oe,[["render",ce]]),me=b(),he={props:["note","noteId"],watch:{note(){this.tempNote=this.note}},data(){return{modal:{},tempNote:{}}},methods:{showModal(){this.modal.show()},hideModal(){this.modal.hide()},update(){me.updateNote(this.noteId,this.tempNote),this.hideModal()}},mounted(){this.modal=new A(this.$refs.modal)}},fe={class:"modal fade","data-bs-keyboard":"false",tabindex:"-1","aria-hidden":"true",ref:"modal"},_e={class:"modal-dialog modal-dialog-centered"},pe={class:"modal-content"},ve={class:"modal-header"},Me=o("h1",{class:"modal-title fs-5"},"編輯訊息",-1),be={class:"modal-body"},ge={class:"modal-footer"};function $e(e,t,s,d,r,a){return m(),_("div",fe,[o("div",_e,[o("div",pe,[o("div",ve,[Me,o("button",{onClick:t[0]||(t[0]=(...n)=>a.hideModal&&a.hideModal(...n)),type:"button",class:"btn-close"})]),o("div",be,[o("form",null,[V(o("textarea",{class:"form-control",style:{height:"100px"},"onUpdate:modelValue":t[1]||(t[1]=n=>r.tempNote=n)},null,512),[[H,r.tempNote]])])]),o("div",ge,[o("button",{type:"button",onClick:t[2]||(t[2]=(...n)=>a.hideModal&&a.hideModal(...n)),class:"btn btn-secondary"},"取消"),o("button",{type:"submit",onClick:t[3]||(t[3]=(...n)=>a.update&&a.update(...n)),class:"btn btn-primary"},"更新")])])])],512)}const ye=Y(he,[["render",$e]]),De={class:"card mb-2"},Se={class:"card-body"},xe={class:"card-title"},we={class:"col text-body-tertiary"},ke={class:"card-text"},Ne={class:"card-footer"},Ce={__name:"Note",props:{note:{type:Object,required:!0}},setup(e){const t=f(null),s=f(null);let d=f({});function r(l){d.value=l,t.value.showModal()}function a(){s.value.showModal()}const n=e;b(),g(()=>{let l=n.note.content.length,c=l>1?"characters":"character";return`${l} ${c}`}),I({deleteNote:!1});const i=g(()=>{let l=new Date(parseInt(n.note.date));return ee(l,"YYYY-MM-DD HH:mm:ss").value});return(l,c)=>(m(),_(y,null,[o("div",De,[o("div",Se,[o("div",xe,[o("small",we,v(i.value),1)]),o("p",ke,v(e.note.content),1)]),o("div",Ne,[o("a",{onClick:c[0]||(c[0]=N(u=>r(e.note.content),["prevent"])),class:"text-decoration-none text-primary",href:"#"}," 編輯 "),o("a",{onClick:c[1]||(c[1]=N(u=>a(),["prevent"])),class:"text-decoration-none text-danger",href:"#"}," 刪除 ")])]),$(ye,{ref_key:"editModal",ref:t,note:M(d),noteId:e.note.id},null,8,["note","noteId"]),$(ue,{ref_key:"DelModal",ref:s,id:e.note.id},null,8,["id"])],64))}},Ye={mounted:e=>{e.focus()}},Ve={class:"mb-3"},He={class:""},Re=["placeholder"],Ae={class:"p-0 pt-2"},Ee={__name:"AddEditNote",props:T({bgColor:{type:String,default:"success"},placeholder:{type:String,default:""},label:{type:String}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e,{expose:t}){const s=L(e,"modelValue"),d=f(null);return t({focusTextarea:()=>{d.value.focus()}}),(a,n)=>(m(),_("div",Ve,[o("form",He,[V((m(),_("textarea",{"onUpdate:modelValue":n[0]||(n[0]=i=>s.value=i),class:"form-control",placeholder:e.placeholder,ref_key:"textareaRef",ref:d,maxlength:"100",style:{height:"140px"}},[F(`   \r
    `)],8,Re)),[[H,s.value],[M(Ye)]]),o("div",Ae,[B(a.$slots,"buttons")])])]))}};function Ie(e,t=100){R(e,s=>{s.length===t&&alert(`Only ${t} characters allowed gosh darnit!`)})}const Te={class:"container-md"},Le=["src","alt"],Fe={class:"mb-4 text-5xl"},Be=o("div",{class:"mb-3 movie-item-genres-wrapper"},null,-1),Oe={class:"text-xl"},Ge={class:"container-md"},Ue=["disabled"],qe={__name:"ItemDetail",props:["id"],setup(e){const t=b(),s=f({}),d=O();R(()=>d.params.id,l=>{location.reload()});async function r(){const l=j(q,"products",d.params.id),c=await z(l);s.value=c.data()}const a=f(""),n=f(null),i=()=>{t.addNote(a.value),a.value="",n.value.focusTextarea()};return Ie(a),G(()=>{r(),t.SetIdKey(d.params.id)}),(l,c)=>(m(),_(y,null,[o("div",Te,[o("img",{class:"img-fluid",src:s.value.image,alt:s.value.name},null,8,Le),o("div",null,[o("h1",Fe,v(s.value.name),1),Be,o("p",Oe,v(s.value.description),1)])]),o("div",Ge,[$(Ee,{modelValue:a.value,"onUpdate:modelValue":c[0]||(c[0]=u=>a.value=u),placeholder:"留言區",ref_key:"addEditNoteRef",ref:n},{buttons:U(()=>[o("button",{onClick:i,disabled:!a.value,class:"btn btn-success"}," 新增紀錄 ",8,Ue)]),_:1},8,["modelValue"]),(m(!0),_(y,null,W(M(t).notes,u=>(m(),P(Ce,{key:u.id,note:u},null,8,["note"]))),128))])],64))}};export{qe as default};
