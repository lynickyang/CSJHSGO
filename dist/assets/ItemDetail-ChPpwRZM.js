import{u as f,r as u,o as x,M as V,a as M,b as m,c as h,d as e,e as b,f as N,g as w,h as C,t as _,i as $,w as k,j as B,k as E,l as g,m as L,F as p,n as I,p as D,_ as F,q as R}from"./index-CjFx3TPz.js";const S={class:"modal-dialog"},q={class:"modal-content"},U=e("h5",{class:"modal-title"},"注意",-1),j=e("div",{class:"modal-body"},[e("p",null,"確定要刪除留言嗎？")],-1),O={class:"modal-footer"},T={__name:"ModalDeleteNote",props:{modelValue:{type:Boolean,default:!1},noteId:{type:String,required:!0}},emits:["update:modelValue"],setup(t,{emit:c}){const l=f(),i=u(null),o=u(null),a=()=>{o.value.hide()},d=s=>{s.key==="Escape"&&closeModal()};return x(()=>{document.addEventListener("keyup",d),o.value=new V(i.value)}),M(()=>{document.removeEventListener("keyup",d)}),(s,n)=>(m(),h("div",{ref_key:"modal",ref:i,class:"modal",tabindex:"-1"},[e("div",S,[e("div",q,[e("div",{class:"modal-header"},[U,e("button",{type:"button",onClick:a,class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]),j,e("div",O,[e("button",{type:"button",onClick:a,class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消"),e("button",{type:"button",onClick:n[0]||(n[0]=r=>b(l).deleteNote(t.noteId)),class:"btn btn-danger"},"刪除")])])])],512))}},K={class:"card mb-4"},W={class:"card-body"},z={class:"card-text"},A={class:"row"},G={class:"col text-secondary"},H={class:"col text-end text-secondary"},J={class:"card-footer"},P={__name:"Note",props:{note:{type:Object,required:!0}},setup(t){const c=u(null),l=t,i=f(),o=N(()=>{let d=l.note.content.length,s=d>1?"characters":"character";return`${d} ${s}`}),a=w({deleteNote:!1});return(d,s)=>{const n=C("RouterLink");return m(),h(p,null,[e("div",K,[e("div",W,[e("p",z,_(t.note.content),1),e("div",A,[e("small",G,_(t.note.date),1),e("small",H,_(o.value),1)])]),e("div",J,[$(n,{to:`/editNote/${t.note.id}`,class:"me-3",href:"#"},{default:k(()=>[B(" 編輯 ")]),_:1},8,["to"]),e("a",{onClick:s[0]||(s[0]=E(r=>b(i).deleteNote(t.note.id),["prevent"])),class:"text-danger",href:"#"}," 刪除 ")])]),a.deleteNote?(m(),g(T,{key:0,ref_key:"delModal",ref:c,modelValue:a.deleteNote,"onUpdate:modelValue":s[1]||(s[1]=r=>a.deleteNote=r),noteId:t.note.id},null,8,["modelValue","noteId"])):L("",!0)],64)}}};function Q(t,c=100){I(t,l=>{l.length===c&&alert(`Only ${c} characters allowed gosh darnit!`)})}const X={class:"container-md"},Y=["src","alt"],Z={class:"mb-4 text-5xl"},ee=e("div",{class:"mb-3 movie-item-genres-wrapper"},null,-1),te={class:"text-xl"},oe={class:"container-md"},se=["disabled"],ne={__name:"ItemDetail",props:["id"],setup(t){const c=D(),l=t,i=f(),o=u(""),a=u(null),d=()=>{i.addNote(o.value),o.value="",a.value.focusTextarea()};Q(o);const s=u(c.products),n=N(()=>s.value.find(r=>r.id===l.id));return(r,y)=>(m(),h(p,null,[e("div",X,[e("img",{class:"img-fluid",src:n.value.image,alt:n.value.name},null,8,Y),e("div",null,[e("h1",Z,_(n.value.name),1),ee,e("p",te,_(n.value.description),1)])]),e("div",oe,[$(F,{modelValue:o.value,"onUpdate:modelValue":y[0]||(y[0]=v=>o.value=v),placeholder:"留言區",ref_key:"addEditNoteRef",ref:a},{buttons:k(()=>[e("button",{onClick:d,disabled:!o.value,class:"btn btn-light text-success"}," 新增紀錄 ",8,se)]),_:1},8,["modelValue"]),(m(!0),h(p,null,R(b(i).notes,v=>(m(),g(P,{key:l.id,note:v},null,8,["note"]))),128))])],64))}};export{ne as default};
