import{c as b,u as D,a as v,_ as C,o as h,b as _,d as o,w as R,v as A,r as f,e as L,t as M,f as N,g,F as $,h as H,i as V,j as F,k as B,l as O,m as T,n as G,p as W,q as j,s as q}from"./index-6fCE9rst.js";import{M as I}from"./modal-IVpuTcq9.js";function Y(t){return typeof t=="function"?t():D(t)}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const P=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,U=/[YMDHhms]o|\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a{1,2}|A{1,2}|m{1,2}|s{1,2}|Z{1,2}|SSS/g;function X(t,e,s,i){let l=t<12?"AM":"PM";return i&&(l=l.split("").reduce((a,n)=>a+=`${n}.`,"")),s?l.toLowerCase():l}function m(t){const e=["th","st","nd","rd"],s=t%100;return t+(e[(s-20)%10]||e[s]||e[0])}function Z(t,e,s={}){var i;const l=t.getFullYear(),a=t.getMonth(),n=t.getDate(),c=t.getHours(),d=t.getMinutes(),r=t.getSeconds(),u=t.getMilliseconds(),E=t.getDay(),p=(i=s.customMeridiem)!=null?i:X,y={Yo:()=>m(l),YY:()=>String(l).slice(-2),YYYY:()=>l,M:()=>a+1,Mo:()=>m(a+1),MM:()=>`${a+1}`.padStart(2,"0"),MMM:()=>t.toLocaleDateString(s.locales,{month:"short"}),MMMM:()=>t.toLocaleDateString(s.locales,{month:"long"}),D:()=>String(n),Do:()=>m(n),DD:()=>`${n}`.padStart(2,"0"),H:()=>String(c),Ho:()=>m(c),HH:()=>`${c}`.padStart(2,"0"),h:()=>`${c%12||12}`.padStart(1,"0"),ho:()=>m(c%12||12),hh:()=>`${c%12||12}`.padStart(2,"0"),m:()=>String(d),mo:()=>m(d),mm:()=>`${d}`.padStart(2,"0"),s:()=>String(r),so:()=>m(r),ss:()=>`${r}`.padStart(2,"0"),SSS:()=>`${u}`.padStart(3,"0"),d:()=>E,dd:()=>t.toLocaleDateString(s.locales,{weekday:"narrow"}),ddd:()=>t.toLocaleDateString(s.locales,{weekday:"short"}),dddd:()=>t.toLocaleDateString(s.locales,{weekday:"long"}),A:()=>p(c,d),AA:()=>p(c,d,!1,!0),a:()=>p(c,d,!0),aa:()=>p(c,d,!0,!0)};return e.replace(U,(S,w)=>{var k,x;return(x=w??((k=y[S])==null?void 0:k.call(y)))!=null?x:S})}function z(t){if(t===null)return new Date(Number.NaN);if(t===void 0)return new Date;if(t instanceof Date)return new Date(t);if(typeof t=="string"&&!/Z$/i.test(t)){const e=t.match(P);if(e){const s=e[2]-1||0,i=(e[7]||"0").substring(0,3);return new Date(e[1],s,e[3]||1,e[4]||0,e[5]||0,e[6]||0,i)}}return new Date(t)}function K(t,e="HH:mm:ss",s={}){return b(()=>Z(z(Y(t)),Y(e),s))}const J=v(),Q={props:["id"],methods:{showModal(){this.modal.show()},hideModal(){this.modal.hide()},deleteCheck(t){J.deleteNote(t),console.log("刪除完成"),this.hideModal()}},mounted(){this.modal=new I(this.$refs.modal)}},tt={class:"modal fade","data-bs-keyboard":"false",tabindex:"-1","aria-hidden":"true",ref:"modal"},et={class:"modal-dialog modal-dialog-centered"},ot={class:"modal-content"},st={class:"modal-header"},at=o("h1",{class:"modal-title fs-5 text-danger"},"確認刪除",-1),nt=o("div",{class:"modal-body"},[o("p",null,"確定要刪除嗎?")],-1),dt={class:"modal-footer"};function lt(t,e,s,i,l,a){return h(),_("div",tt,[o("div",et,[o("div",ot,[o("div",st,[at,o("button",{onClick:e[0]||(e[0]=(...n)=>a.hideModal&&a.hideModal(...n)),type:"button",class:"btn-close"})]),nt,o("div",dt,[o("button",{type:"button",onClick:e[1]||(e[1]=(...n)=>a.hideModal&&a.hideModal(...n)),class:"btn btn-secondary"},"取消"),o("button",{type:"submit",onClick:e[2]||(e[2]=n=>a.deleteCheck(this.id)),class:"btn btn-danger"},"確定")])])])],512)}const rt=C(Q,[["render",lt]]),it=v(),ct={props:["note","noteId"],watch:{note(){this.tempNote=this.note}},data(){return{modal:{},tempNote:{}}},methods:{showModal(){this.modal.show()},hideModal(){this.modal.hide()},update(){it.updateNote(this.noteId,this.tempNote),this.hideModal()}},mounted(){this.modal=new I(this.$refs.modal)}},ut={class:"modal fade","data-bs-keyboard":"false",tabindex:"-1","aria-hidden":"true",ref:"modal"},mt={class:"modal-dialog modal-dialog-centered"},ht={class:"modal-content"},ft={class:"modal-header"},_t=o("h1",{class:"modal-title fs-5"},"編輯訊息",-1),pt={class:"modal-body"},Mt={class:"modal-footer"};function vt(t,e,s,i,l,a){return h(),_("div",ut,[o("div",mt,[o("div",ht,[o("div",ft,[_t,o("button",{onClick:e[0]||(e[0]=(...n)=>a.hideModal&&a.hideModal(...n)),type:"button",class:"btn-close"})]),o("div",pt,[o("form",null,[R(o("textarea",{class:"form-control",style:{height:"100px"},"onUpdate:modelValue":e[1]||(e[1]=n=>l.tempNote=n)},null,512),[[A,l.tempNote]])])]),o("div",Mt,[o("button",{type:"button",onClick:e[2]||(e[2]=(...n)=>a.hideModal&&a.hideModal(...n)),class:"btn btn-secondary"},"取消"),o("button",{type:"submit",onClick:e[3]||(e[3]=(...n)=>a.update&&a.update(...n)),class:"btn btn-primary"},"更新")])])])],512)}const bt=C(ct,[["render",vt]]),gt={class:"card mb-2"},$t={class:"card-body"},Dt={class:"card-title"},yt={class:"col text-body-tertiary"},St={class:"card-text"},wt={class:"card-footer"},kt={__name:"Note",props:{note:{type:Object,required:!0}},setup(t){const e=f(null),s=f(null);let i=f({});function l(d){i.value=d,e.value.showModal()}function a(){s.value.showModal()}const n=t;v(),b(()=>{let d=n.note.content.length,r=d>1?"characters":"character";return`${d} ${r}`}),L({deleteNote:!1});const c=b(()=>{let d=new Date(parseInt(n.note.date));return K(d,"YYYY-MM-DD HH:mm:ss").value});return(d,r)=>(h(),_($,null,[o("div",gt,[o("div",$t,[o("div",Dt,[o("small",yt,M(c.value),1)]),o("p",St,M(t.note.content),1)]),o("div",wt,[o("a",{onClick:r[0]||(r[0]=N(u=>l(t.note.content),["prevent"])),class:"text-decoration-none text-primary",href:"#"}," 編輯 "),o("a",{onClick:r[1]||(r[1]=N(u=>a(),["prevent"])),class:"text-decoration-none text-danger",href:"#"}," 刪除 ")])]),g(bt,{ref_key:"editModal",ref:e,note:D(i),noteId:t.note.id},null,8,["note","noteId"]),g(rt,{ref_key:"DelModal",ref:s,id:t.note.id},null,8,["id"])],64))}};function xt(t,e=100){H(t,s=>{s.length===e&&alert(`Only ${e} characters allowed gosh darnit!`)})}const Nt={class:"container-md"},Yt=["src","alt"],Ct={class:"mb-4 text-5xl"},Ht=o("div",{class:"mb-3 movie-item-genres-wrapper"},null,-1),It={class:"text-xl"},Et={class:"container-md"},Rt=["disabled"],Vt={__name:"ItemDetail",props:["id"],setup(t){const e=v(),s=f({}),i=V();H(()=>i.params.id,d=>{location.reload()});async function l(){const d=G(W,"products",i.params.id),r=await j(d);s.value=r.data()}const a=f(""),n=f(null),c=()=>{e.addNote(a.value),a.value="",n.value.focusTextarea()};return xt(a),F(()=>{l(),e.SetIdKey(i.params.id)}),(d,r)=>(h(),_($,null,[o("div",Nt,[o("img",{class:"img-fluid",src:s.value.image,alt:s.value.name},null,8,Yt),o("div",null,[o("h1",Ct,M(s.value.name),1),Ht,o("p",It,M(s.value.description),1)])]),o("div",Et,[g(O,{modelValue:a.value,"onUpdate:modelValue":r[0]||(r[0]=u=>a.value=u),placeholder:"留言區",ref_key:"addEditNoteRef",ref:n},{buttons:B(()=>[o("button",{onClick:c,disabled:!a.value,class:"btn btn-success"}," 新增紀錄 ",8,Rt)]),_:1},8,["modelValue"]),(h(!0),_($,null,T(D(e).notes,u=>(h(),q(kt,{key:u.id,note:u},null,8,["note"]))),128))])],64))}};export{Vt as default};
